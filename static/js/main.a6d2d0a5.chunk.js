(this.webpackJsonpReactSocialNetwork=this.webpackJsonpReactSocialNetwork||[]).push([[0],{140:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(25),r=n(26),o=n(28),s=n(27),c=n(32),i=n(0),l=n.n(i),u=n(12),m=function(e){return{isAuth:e.auth.isAuth}},f=function(e){var t=function(t){Object(o.a)(i,t);var n=Object(s.a)(i);function i(){return Object(a.a)(this,i),n.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){return this.props.isAuth?l.a.createElement(e,this.props):l.a.createElement(c.a,{to:"/login"})}}]),i}(l.a.Component);return Object(u.connect)(m)(t)}},141:function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var a=n(53),r=n(10),o={dialogs:[{id:1,name:"Dimych"},{id:2,name:"Andrew"},{id:3,name:"Sveta"},{id:4,name:"Sasha"},{id:5,name:"Viktor"},{id:6,name:"Valera"}],messages:[{id:1,message:"Hi"},{id:2,message:"How is your girlfriend?"},{id:3,message:"See you"},{id:4,message:"I study in MIREA"},{id:5,message:"Where is your car"}]},s=function e(t){return{type:e,newMessageBody:t}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":var n=t.newMessageBody;return Object(r.a)({},e,{messages:[].concat(Object(a.a)(e.messages),[{id:7,message:n}])});default:return e}}},148:function(e,t,n){e.exports=n.p+"static/media/preloader.3ffaf718.svg"},150:function(e,t,n){e.exports=n.p+"static/media/reactIcon.580ffd26.png"},17:function(e,t,n){e.exports={nav:"Navbar_nav__3q2WL",list:"Navbar_list__1sMwt",friends:"Navbar_friends__2V8Ze",item:"Navbar_item__2oMa_",activeLink:"Navbar_activeLink__1sAdL"}},177:function(e,t,n){e.exports=n(334)},182:function(e,t,n){},183:function(e,t,n){},33:function(e,t,n){e.exports={user:"Users_user__2qA9G",photo:"Users_photo__3muwv",fol:"Users_fol__1f0qC",discription:"Users_discription__HYdxH",name:"Users_name__21Ohc",follow:"Users_follow__3Oihd",unfollow:"Users_unfollow__3w5bA"}},334:function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var a,r,o=n(0),s=n.n(o),c=n(78),i=n.n(c),l=(n(182),n(25)),u=n(26),m=n(28),f=n(27),p=(n(183),n(17)),d=n.n(p),g=n(15),h=function(){return s.a.createElement("nav",{className:d.a.nav},s.a.createElement("div",{className:d.a.list},s.a.createElement("div",{className:d.a.item},s.a.createElement(g.b,{to:"/profile",activeClassName:d.a.activeLink},"Profile")),s.a.createElement("div",{className:"".concat(d.a.item," ").concat(d.a.active)},s.a.createElement(g.b,{to:"/dialogs",activeClassName:d.a.activeLink},"Messages")),s.a.createElement("div",{className:d.a.item},s.a.createElement(g.b,{to:"/users",activeClassName:d.a.activeLink},"Users")),s.a.createElement("div",{className:d.a.item},s.a.createElement("div",null,"News")),s.a.createElement("div",{className:d.a.item},s.a.createElement("div",null,"Music")),s.a.createElement("div",{className:d.a.item},s.a.createElement(g.b,{to:"/settings",activeClassName:d.a.activeLink},"Settings"))),s.a.createElement("div",{className:d.a.friends},"friends"))},E=n(32),_=n(12),v=n(7),b=n.n(v),O=n(16),S=n(53),P=n(10),y=n(147),w=n.n(y).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"48080886-eec4-4752-8391-b5f4271f9163"}}),N={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return w.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},unFollow:function(e){return w.delete("follow/".concat(e))},Follow:function(e){return w.post("follow/".concat(e))},getProfile:function(e){return k.getProfile(e)}},k={getProfile:function(e){return w.get("profile/"+e)},getStatus:function(e){return w.get("profile/status/"+e)},updateStatus:function(e){return w.put("profile/status/",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),w.put("profile/photo/",t,{headers:{"Content-Type":"multipart/form-data"}})},saveProfile:function(e){return w.put("profile",e)}};!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(a||(a={})),function(e){e[e.CaptchaIsRequired=10]="CaptchaIsRequired"}(r||(r={}));var j=function(){return w.get("auth/me").then((function(e){return e.data}))},C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return w.post("auth/login",{email:e,password:t,rememberMe:n,captcha:a}).then((function(e){return e.data}))},I=function(){return w.delete("auth/login")},T=function(){return w.get("security/get-captcha-url")},U=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(P.a)({},e,{},a):e}))},L={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},A=function(e){return{type:"FOLLOW",userId:e}},x=function(e){return{type:"UNFOLLOW",userId:e}},F=function(e){return{type:"SET_USERS",users:e}},M=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},B=function(e){return{type:"SET_TOTAL_USERS_COUNT",count:e}},R=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},D=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},z=function(){var e=Object(O.a)(b.a.mark((function e(t,n,a,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(D(!0,n)),e.next=3,a(n);case 3:0===e.sent.data.resultCode&&t(r(n)),t(D(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(P.a)({},e,{users:U(e.users,t.userId,"id",{followed:!0})});case"UNFOLLOW":return Object(P.a)({},e,{users:U(e.users,t.userId,"id",{followed:!1})});case"SET_USERS":return Object(P.a)({},e,{users:t.users});case"SET_CURRENT_PAGE":return Object(P.a)({},e,{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(P.a)({},e,{totalUsersCount:t.count});case"TOGGLE_IS_FETCHING":return Object(P.a)({},e,{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(P.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(S.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},H=n(65),V=n(148),W=n.n(V),J=function(e){return s.a.createElement("span",{className:"preloader"},s.a.createElement("img",{src:W.a,alt:""}))},K=n(33),q=n.n(K),X=n(48),Z=n.n(X),Y=function(e){var t=e.user,n=e.followingInProgress,a=e.unfollow,r=e.follow;return s.a.createElement("div",{className:q.a.user},s.a.createElement("div",{className:q.a.photo},s.a.createElement(g.b,{to:"profile/"+t.id},s.a.createElement("img",{src:null!=t.photos.small?t.photos.small:Z.a,className:q.a.photo,alt:""}))),s.a.createElement("div",{className:q.a.fol},t.followed?s.a.createElement("button",{disabled:n.some((function(e){return e===t.id})),className:q.a.unfollow,onClick:function(){a(t.id)}},"Unfollow"):s.a.createElement("button",{disabled:n.some((function(e){return e===t.id})),className:q.a.follow,onClick:function(){r(t.id)}},"Follow")),s.a.createElement("div",{className:q.a.discription},s.a.createElement("div",{className:q.a.name},t.name),s.a.createElement("div",null,t.status)))},Q=n(50),$=n(45),ee=n(54),te=n.n(ee),ne=n(64),ae=n.n(ne),re=function(e){for(var t=e.totalItemsCount,n=e.pageSize,a=e.currentPage,r=e.onPageChanged,c=e.portionSize,i=void 0===c?10:c,l=Math.ceil(t/n),u=[],m=1;m<=l;m++)u.push(m);var f=Math.ceil(l/i),p=Object(o.useState)(1),d=Object($.a)(p,2),g=d[0],h=d[1],E=(g-1)*i+1,_=g*i;return s.a.createElement("div",{className:ae()(te.a.paginator)},g>1&&s.a.createElement("button",{className:te.a.button,onClick:function(){h(g-1)}},"PREV"),u.filter((function(e){return e>=E&&e<=_})).map((function(e){return s.a.createElement("span",{className:ae()(Object(Q.a)({},te.a.selectedPage,a===e),te.a.pageNumber),key:e,onClick:function(t){r(e)}},e)})),f>g&&s.a.createElement("button",{className:te.a.button,onClick:function(){h(g+1)}},"NEXT"))},oe=function(e){var t=e.currentPage,n=e.totalUsersCount,a=e.pageSize,r=e.onPageChanged,o=e.isFetching,c=e.users,i=Object(H.a)(e,["currentPage","totalUsersCount","pageSize","onPageChanged","isFetching","users"]);return s.a.createElement("div",null,s.a.createElement(re,{currentPage:t,onPageChanged:r,totalItemsCount:n,pageSize:a}),s.a.createElement("div",null,o?s.a.createElement(J,null):null,c.map((function(e){return s.a.createElement(Y,{user:e,followingInProgress:i.followingInProgress,unfollow:i.unfollow,follow:i.follow,key:e.id})}))))},se=n(5),ce=n(149),ie=Object(ce.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),le=function(e){return e.usersPage.pageSize},ue=function(e){return e.usersPage.totalUsersCount},me=function(e){return e.usersPage.currentPage},fe=function(e){return e.usersPage.isFetching},pe=function(e){return e.usersPage.followingInProgress},de=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){var n=e.props.pageSize;e.props.getUsers(t,n)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,n=e.pageSize;this.props.getUsers(t,n)}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(oe,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,unfollow:this.props.unfollow,follow:this.props.follow,followingInProgress:this.props.followingInProgress,isFetching:this.props.isFetching}))}}]),n}(s.a.Component),ge=Object(se.compose)(Object(_.connect)((function(e){return{users:ie(e),pageSize:le(e),totalUsersCount:ue(e),currentPage:me(e),isFetching:fe(e),followingInProgress:pe(e)}}),{follow:function(e){return function(){var t=Object(O.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:z(n,e,N.Follow.bind(N),A);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(O.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:z(n,e,N.unFollow.bind(N),x);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUsers:function(e,t){return function(){var n=Object(O.a)(b.a.mark((function n(a,r){var o;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(R(!0)),a(M(e)),n.next=4,N.getUsers(e,t);case 4:o=n.sent,a(R(!1)),a(F(o.items)),a(B(o.totalCount));case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}}))(de),he=n(9),Ee=n.n(he),_e=function(e){var t=Object(o.useState)(!1),n=Object($.a)(t,2),a=n[0],r=n[1],c=Object(o.useState)(e.status),i=Object($.a)(c,2),l=i[0],u=i[1];Object(o.useEffect)((function(){u(e.status)}),[e.status]);return s.a.createElement("div",null,!a&&s.a.createElement("div",null,s.a.createElement("span",{className:Ee.a.status,onDoubleClick:function(){r(!0)}},e.status||"----")),a&&s.a.createElement("div",null,s.a.createElement("input",{onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){r(!1),e.updateStatus(l)},value:l})))},ve=n(44),be=n.n(ve),Oe=n(142),Se=function(e){var t=e.meta,n=t.touched,a=t.error,r=e.children,o=n&&a;return s.a.createElement("div",{className:be.a.formControl+" "+(o?be.a.error:"")},s.a.createElement("div",null,r),o&&s.a.createElement("span",null,a))},Pe=function(e){var t=e.input,n=(e.meta,Object(H.a)(e,["input","meta"]));return s.a.createElement(Se,e,s.a.createElement("textarea",Object.assign({},t,n)))},ye=function(e){var t=e.input,n=(e.meta,Object(H.a)(e,["input","meta"]));return s.a.createElement(Se,e,s.a.createElement("input",Object.assign({},t,n)))};function we(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return s.a.createElement("span",null,s.a.createElement(Oe.a,Object.assign({placeholder:e,name:t,validate:n,component:a},r))," ",o)}var Ne,ke=n(143),je=Object(ke.a)({form:"edit-profile"})((function(e){var t=e.profile,n=e.handleSubmit,a=e.error,r=e.status,o=e.updateStatus;return s.a.createElement("form",{className:Ee.a.form,onSubmit:n},s.a.createElement("span",{className:Ee.a.info},s.a.createElement("div",{className:Ee.a.name},we("Full name","fullName",[],ye)),s.a.createElement(_e,{status:r,updateStatus:o}),s.a.createElement("div",null,s.a.createElement("div",null,"About me:"),we("About me","aboutMe",[],Pe)),s.a.createElement("div",null,s.a.createElement("div",null,"Looking for a job:")," ",we("","lookingForAJob",[],ye,{type:"checkbox"})),s.a.createElement("div",null,s.a.createElement("div",null,"My professional skills:"),we("My professional skills","lookingForAJobDescription",[],Pe)),s.a.createElement("div",null,s.a.createElement("button",{className:Ee.a.save},"save")),a&&s.a.createElement("div",{className:be.a.formSummaryError},a)),s.a.createElement("div",null,"My contacts: ",Object.keys(t.contacts).map((function(e){return s.a.createElement("div",{key:e,className:Ee.a.contact},s.a.createElement("div",{className:Ee.a.contactsEdit},s.a.createElement("div",{className:Ee.a.contactKey},e,":"),s.a.createElement("div",{className:Ee.a.contactValue},we("http://"+e+".com","contacts."+e,[],ye))))}))))})),Ce=function(e){var t=e.profile,n=e.isOwner,a=e.goToEditMode,r=e.status,o=e.updateStatus;return s.a.createElement("span",{className:Ee.a.form},s.a.createElement("span",{className:Ee.a.info},s.a.createElement("div",{className:Ee.a.name},t.fullName),s.a.createElement(_e,{status:r,updateStatus:o}),s.a.createElement("span",{className:Ee.a.contacts},s.a.createElement("div",{className:Ee.a.contactsMenuName,onClick:function(){document.getElementById("contacts").style.display="block"},onDoubleClick:function(){document.getElementById("contacts").style.display="none"}},"My contacts"),s.a.createElement("div",{id:"contacts",className:Ee.a.contactsMenu},Object.keys(t.contacts).map((function(e){return s.a.createElement(Ie,{key:e,contactTitle:e,contactValue:t.contacts[e]})}))))),s.a.createElement("span",{className:Ee.a.description},s.a.createElement("div",null,s.a.createElement("div",null,"\u2022About me: "),s.a.createElement("span",{className:Ee.a.tab},t.aboutMe)),s.a.createElement("div",null,s.a.createElement("span",null,"\u2022Looking for a job:")," ",t.lookingForAJob?"yes":"no"),t.lookingForAJob&&s.a.createElement("div",null,s.a.createElement("div",null,"\u2022My professional skills:")," ",s.a.createElement("span",{className:Ee.a.tab},t.lookingForAJobDescription)),n&&s.a.createElement("div",null,s.a.createElement("button",{className:Ee.a.edit,onClick:a},"Edit info"))))},Ie=function(e){var t=e.contactTitle,n=e.contactValue;return n?s.a.createElement("div",null,t,": ",s.a.createElement("a",{className:Ee.a.contactsLink,href:n},n)):null},Te=function(e){var t=e.profile,n=e.status,a=e.updateStatus,r=e.isOwner,c=e.savePhoto,i=e.saveProfile,l=Object(o.useState)(!1),u=Object($.a)(l,2),m=u[0],f=u[1];return s.a.createElement("div",{className:Ee.a.discriptionBlock},s.a.createElement("div",{className:Ee.a.photo},r&&s.a.createElement("input",{id:"upl",type:"file",className:Ee.a.button,onChange:function(e){e.target.files.length&&c(e.target.files[0])}}),s.a.createElement("label",{htmlFor:"upl"},s.a.createElement("img",{src:t.photos.large||Z.a,className:Ee.a.mainPhoto,alt:""}))),s.a.createElement("div",{className:Ee.a.discription},m?s.a.createElement(je,{initialValues:t,profile:t,onSubmit:function(e){i(e).then((function(){f(!1)}))},status:n,updateStatus:a}):s.a.createElement(Ce,{goToEditMode:function(){f(!0)},profile:t,isOwner:r,status:n,updateStatus:a})))},Ue=n(66),Le=n.n(Ue),Ae=n(55),xe=n.n(Ae),Fe=function(e){return s.a.createElement("div",{className:xe.a.item},s.a.createElement("img",{className:xe.a.img,src:Z.a,alt:""}),s.a.createElement("div",{className:xe.a.mes},e.message),s.a.createElement("span",{className:xe.a.likes,onClick:function(){e.addLikes(e.id)}},s.a.createElement("span",{className:xe.a.count},e.likesCount+" "),"likes"))},Me=n(134),Be=n.n(Me),Re=n(138),De=function(e){if(!e)return"Field is required"},ze=(Ne=50,function(e){if(e.length>Ne)return"Max length is ".concat(Ne," symbols")}),Ge=n.n(Re)()({form:"profileAddPostForm"})((function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit},s.a.createElement("div",null,s.a.createElement(Be.a,{className:Le.a.area,cols:"25",rows:"4",component:Pe,name:"newPostText",placeholder:"Enter your post",validate:[De,ze]})),s.a.createElement("div",null,s.a.createElement("button",{className:Le.a.button},"Add post")))})),He=s.a.memo((function(e){var t=e.posts.map((function(t){return s.a.createElement(Fe,{message:t.message,likesCount:t.likesCount,key:t.id,id:t.id,profile:e.profile,addLikes:e.addLikes})}));return s.a.createElement("div",{className:Le.a.postsBlock},s.a.createElement("h3",null,"My posts"),s.a.createElement(Ge,{onSubmit:function(t){e.addPost(t.newPostText),t.newPostText=" "}}),s.a.createElement("div",{className:Le.a.posts},t))})),Ve=n(36),We={posts:[{id:1,message:"It is my first post",likesCount:12},{id:2,message:"It is my website",likesCount:1},{id:3,message:"Hi, how are you?",likesCount:21},{id:4,message:"I want to become a developer",likesCount:11},{id:5,message:"Say me about you",likesCount:1}],profile:null,status:""},Je=function(e){return{type:"SET_STATUS",status:e}},Ke=function(e){return function(){var t=Object(O.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.getProfile(e);case 2:a=t.sent,n({type:"SET_USER_PROFILE",profile:a.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var n={id:6,message:t.newPostText,likesCount:0};return Object(P.a)({},e,{posts:[].concat(Object(S.a)(e.posts),[n])});case"SET_STATUS":return Object(P.a)({},e,{status:t.status});case"SET_USER_PROFILE":return Object(P.a)({},e,{profile:t.profile});case"SAVE_PHOTO_SUCCESS":return Object(P.a)({},e,{profile:Object(P.a)({},e.profile,{photos:t.photos})});case"DELETE_POST":return Object(P.a)({},e,{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case"ADD_LIKES":return Object(P.a)({},e,{posts:e.posts.map((function(e){return e.id===t.postId?Object(P.a)({},e,{likesCount:e.likesCount+1}):e}))});default:return e}},Xe=Object(_.connect)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText,profile:e.profilePage.profile}}),(function(e){return{addPost:function(t){e(function(e){return{type:"ADD-POST",newPostText:e}}(t))},addLikes:function(t){e({type:"ADD_LIKES",postId:t})}}}))(He),Ze=function(e){return e.profile?s.a.createElement("div",null,s.a.createElement(Te,{isOwner:e.isOwner,savePhoto:e.savePhoto,profile:e.profile,status:e.status,saveProfile:e.saveProfile,updateStatus:e.updateStatus}),s.a.createElement(Xe,null)):s.a.createElement(J,null)},Ye=n(140),Qe=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(Ze,Object.assign({},this.props,{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto})))}}]),n}(s.a.Component),$e=Object(se.compose)(Object(_.connect)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.id,isAuth:e.auth.isAuth}}),{getUserProfile:Ke,getStatus:function(e){return function(){var t=Object(O.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.getStatus(e);case 2:a=t.sent,n(Je(a.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(O.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(Je(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(O.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.savePhoto(e);case 2:a=t.sent,n({type:"SAVE_PHOTO_SUCCESS",photos:a.data.data.photos});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(O.a)(b.a.mark((function t(n,a){var r,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.id,t.next=3,k.saveProfile(e);case 3:if(0!==(o=t.sent).data.resultCode){t.next=8;break}n(Ke(r)),t.next=10;break;case 8:return n(Object(Ve.a)("edit-profile",{_error:o.data.messages[0]})),t.abrupt("return",Promise.reject(o.data.messages[0]));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),E.g,Ye.a)(Qe),et=n(37),tt=n.n(et),nt=n(150),at=n.n(nt),rt=function(e){return s.a.createElement("div",{className:tt.a.header},s.a.createElement(g.b,{to:"/profile/",activeClassName:tt.a.activeLink},s.a.createElement("img",{src:at.a,alt:""})),s.a.createElement(E.a,{to:"/login"}),s.a.createElement("div",{className:tt.a.loginBlock},e.isAuth?s.a.createElement("div",null,s.a.createElement(g.b,{to:"/profile",className:tt.a.userName},e.login),s.a.createElement("div",{className:tt.a.logout},s.a.createElement("button",{onClick:e.logout,className:tt.a.button},"log out"))):s.a.createElement("div",{className:tt.a.login},s.a.createElement(g.b,{to:"login"},"Log in"))))},ot={id:null,email:null,login:null,isAuth:!1,captchaUrl:null},st=function(e,t,n,a){return{type:"auth/SET_USER_DATA",payload:{id:e,email:t,login:n,isAuth:a}}},ct=function(e){return{type:"GET_CAPTCHA_URL_SUCCESS",payload:{captchaUrl:e}}},it=function(){return function(){var e=Object(O.a)(b.a.mark((function e(t){var n,r,o,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:(n=e.sent).resultCode===a.Success&&(r=n.data,o=r.id,s=r.email,c=r.login,t(st(o,s,c,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},lt=function(){return function(){var e=Object(O.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:n=e.sent,a=n.data.url,t(ct(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_USER_DATA":case"GET_CAPTCHA_URL_SUCCESS":return Object(P.a)({},e,{},t.payload);default:return e}},mt=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return s.a.createElement(rt,this.props)}}]),n}(s.a.Component),ft=Object(_.connect)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(O.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:0===e.sent.data.resultCode&&t(st(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(mt),pt=n(56),dt=n.n(pt),gt=Object(ke.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,a=e.captchaUrl;return s.a.createElement("form",{onSubmit:t},we("Email","email",[De],ye),we("Password","password",[De],ye,{type:"password"}),s.a.createElement("div",{className:dt.a.s1},s.a.createElement("div",{className:dt.a.s2},we(void 0,"rememberMe",[],ye,{type:"checkbox"})),s.a.createElement("div",{className:dt.a.s3},"remember me")),a&&s.a.createElement("img",{src:a,alt:""}),a&&we("Symbols from image","captcha",[De],ye,{}),n&&s.a.createElement("div",{className:be.a.formSummaryError},n),s.a.createElement("div",null,s.a.createElement("button",{className:dt.a.button},"Log In")))})),ht=Object(_.connect)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),{login:function(e,t,n,o){return function(){var s=Object(O.a)(b.a.mark((function s(c){var i,l;return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,C(e,t,n,o);case 2:(i=s.sent).resultCode===a.Success?c(it()):(i.resultCode===r.CaptchaIsRequired&&c(lt()),l=i.messages.length>0?i.messages[0]:"Some error",c(Object(Ve.a)("login",{_error:l})));case 4:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}})((function(e){return e.isAuth?s.a.createElement(E.a,{to:"/profile"}):s.a.createElement("div",{className:dt.a.login},s.a.createElement("h2",null,"LOG IN"),s.a.createElement(gt,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)},captchaUrl:e.captchaUrl}))})),Et={initialized:!1},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(P.a)({},e,{initialized:!0});default:return e}},vt=n(141),bt={},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt;arguments.length>1&&arguments[1];return e},St=n(151),Pt=n(144),yt={blackThemeButton:!1,sideStyle:"side"},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRESS_BLACK_THEME_BUTTON":return Object(P.a)({},e,{blackThemeButton:!e.blackThemeButton});default:return e}},Nt=Object(se.combineReducers)({profilePage:qe,dialogsPage:vt.a,sidebar:Ot,usersPage:G,auth:ut,form:Pt.a,app:_t,settings:wt}),kt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||se.compose,jt=Object(se.createStore)(Nt,kt(Object(se.applyMiddleware)(St.a)));window.__store__=jt;var Ct=jt,It=n(67),Tt=n.n(It),Ut=function(e){return s.a.createElement("div",{className:Tt.a.settings},s.a.createElement("span",{className:Tt.a.label},"Night theme"),s.a.createElement("span",{onClick:function(){e.blackThemeButton?(e.onBlackThemeButton(),document.getElementById("side").style.backgroundColor="white",document.getElementById("wrapper").style.backgroundColor="ghostwhite"):(e.onBlackThemeButton(),document.getElementById("side").style.backgroundColor="#72879c",document.getElementById("wrapper").style.backgroundColor="#586775")},className:ae()(Object(Q.a)({},Tt.a.switchOn,e.blackThemeButton),Tt.a.button)}))},Lt=Object(_.connect)((function(e){return{blackThemeButton:e.settings.blackThemeButton,buttonStyle:e.settings.buttonStyle}}),(function(e){return{onBlackThemeButton:function(t){e({type:"PRESS_BLACK_THEME_BUTTON"})}}}))(Ut),At=s.a.lazy((function(){return n.e(3).then(n.bind(null,337))})),xt=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return s.a.createElement("div",{className:"appWrapper"},s.a.createElement("div",{id:"side",className:this.props.sideStyle}),s.a.createElement("div",{className:"head"},s.a.createElement(ft,null)),s.a.createElement("div",{className:"nav"},s.a.createElement(h,null)),s.a.createElement("div",{id:"wrapper",className:"appWrapperContent"},s.a.createElement(E.d,null,"               ",s.a.createElement(E.b,{path:"/dialogs",render:(e=At,function(t){return s.a.createElement(s.a.Suspense,{fallback:s.a.createElement("div",{style:{margin:"20px"}},"Loading...")},s.a.createElement(e,t))})}),s.a.createElement(E.b,{path:"/profile/:userId?",render:function(){return s.a.createElement($e,null)}}),s.a.createElement(E.b,{path:"/users",render:function(){return s.a.createElement(ge,null)}}),s.a.createElement(E.b,{exact:!0,path:"/login",render:function(){return s.a.createElement(ht,null)}}),s.a.createElement(E.b,{exact:!0,path:"/settings",render:function(){return s.a.createElement(Lt,null)}}),s.a.createElement(E.b,{path:"*",render:function(){return s.a.createElement("h1",null,"404 NOT FOUND")}}))));var e}}]),n}(s.a.Component),Ft=Object(se.compose)(E.g,Object(_.connect)((function(e){return{initialized:e.app.initialized,sideStyle:e.settings.sideStyle}}),{initializeApp:function(){return function(e){e(it()).then((function(){e({type:"INITIALIZED_SUCCESS"})}))}}}))(xt),Mt=function(e){return s.a.createElement(g.a,null,s.a.createElement(_.Provider,{store:Ct},s.a.createElement(Ft,null)))};i.a.render(s.a.createElement(Mt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},37:function(e,t,n){e.exports={header:"Header_header__2S7ee",loginBlock:"Header_loginBlock__349YX",userName:"Header_userName__TVQeU",logout:"Header_logout__1U7Jq",login:"Header_login__2ZaXp",button:"Header_button__3AOAn"}},44:function(e,t,n){e.exports={formControl:"FormsControls_formControl__KJHG6",error:"FormsControls_error__2iS7F",formSummaryError:"FormsControls_formSummaryError__2Z5fj"}},48:function(e,t,n){e.exports=n.p+"static/media/user.8b1dbb1f.png"},54:function(e,t,n){e.exports={paginator:"Paginator_paginator__sV1Wk",pageNumber:"Paginator_pageNumber__2hAk5",selectedPage:"Paginator_selectedPage__to5Hh",button:"Paginator_button__28PL3"}},55:function(e,t,n){e.exports={item:"Post_item__FKWLk",img:"Post_img__21o-o",mes:"Post_mes__td-LE",likes:"Post_likes__LVZOU",count:"Post_count__vNeRN"}},56:function(e,t,n){e.exports={login:"Login_login__1mx91",button:"Login_button__y-y6T",s1:"Login_s1__1Mhuj",s2:"Login_s2__13kQf",s3:"Login_s3__A7rbK"}},66:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__PVv8X",posts:"MyPosts_posts__1_mZ_",button:"MyPosts_button__1Fkxg",area:"MyPosts_area__lk7I7"}},67:function(e,t,n){e.exports={settings:"Settings_settings__yplet",button:"Settings_button__2fj6E",switchOn:"Settings_switchOn__1Q9dc",label:"Settings_label__3_dls"}},9:function(e,t,n){e.exports={discriptionBlock:"ProfileInfo_discriptionBlock__nHaqE",photo:"ProfileInfo_photo__2mVUa",mainPhoto:"ProfileInfo_mainPhoto__2Jymk",button:"ProfileInfo_button__3nRMG",form:"ProfileInfo_form__35zYX",info:"ProfileInfo_info__1r8Ls",description:"ProfileInfo_description__1GUTd",contacts:"ProfileInfo_contacts__1Z3we",contactsEdit:"ProfileInfo_contactsEdit__2K0eB",contactKey:"ProfileInfo_contactKey__zdFv_",contactValue:"ProfileInfo_contactValue__3S9p6",contactsLink:"ProfileInfo_contactsLink__JvaC6",contactsMenu:"ProfileInfo_contactsMenu__1PsEm",contactsMenuName:"ProfileInfo_contactsMenuName__2mjW2",name:"ProfileInfo_name__3zy0Q",status:"ProfileInfo_status__3WJYX",tab:"ProfileInfo_tab__1dA_n",save:"ProfileInfo_save__3ye6s",edit:"ProfileInfo_edit__ccIe6"}}},[[177,1,2]]]);
//# sourceMappingURL=main.a6d2d0a5.chunk.js.map