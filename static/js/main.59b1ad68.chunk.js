(this.webpackJsonpReactSocialNetwork=this.webpackJsonpReactSocialNetwork||[]).push([[0],{140:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(25),r=n(26),o=n(28),s=n(27),c=n(32),i=n(0),l=n.n(i),u=n(12),m=function(e){return{isAuth:e.auth.isAuth}},f=function(e){var t=function(t){Object(o.a)(i,t);var n=Object(s.a)(i);function i(){return Object(a.a)(this,i),n.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){return this.props.isAuth?l.a.createElement(e,this.props):l.a.createElement(c.a,{to:"/login"})}}]),i}(l.a.Component);return Object(u.connect)(m)(t)}},141:function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var a=n(54),r=n(10),o={dialogs:[{id:1,name:"Dimych"},{id:2,name:"Andrew"},{id:3,name:"Sveta"},{id:4,name:"Sasha"},{id:5,name:"Viktor"},{id:6,name:"Valera"}],messages:[{id:1,message:"Hi"},{id:2,message:"How is your girlfriend?"},{id:3,message:"See you"},{id:4,message:"I study in MIREA"},{id:5,message:"Where is your car"}]},s=function e(t){return{type:e,newMessageBody:t}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":var n=t.newMessageBody;return Object(r.a)({},e,{messages:[].concat(Object(a.a)(e.messages),[{id:7,message:n}])});default:return e}}},148:function(e,t,n){e.exports=n.p+"static/media/preloader.3ffaf718.svg"},150:function(e,t,n){e.exports=n.p+"static/media/reactIcon.580ffd26.png"},17:function(e,t,n){e.exports={nav:"Navbar_nav__3q2WL",list:"Navbar_list__1sMwt",friends:"Navbar_friends__2V8Ze",item:"Navbar_item__2oMa_",activeLink:"Navbar_activeLink__1sAdL"}},177:function(e,t,n){e.exports=n(334)},182:function(e,t,n){},183:function(e,t,n){},33:function(e,t,n){e.exports={user:"Users_user__2qA9G",photo:"Users_photo__3muwv",fol:"Users_fol__1f0qC",discription:"Users_discription__HYdxH",name:"Users_name__21Ohc",follow:"Users_follow__3Oihd",unfollow:"Users_unfollow__3w5bA"}},334:function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var a,r=n(0),o=n.n(r),s=n(78),c=n.n(s),i=(n(182),n(25)),l=n(26),u=n(28),m=n(27),f=(n(183),n(17)),p=n.n(f),d=n(15),g=function(){return o.a.createElement("nav",{className:p.a.nav},o.a.createElement("div",{className:p.a.list},o.a.createElement("div",{className:p.a.item},o.a.createElement(d.b,{to:"/profile",activeClassName:p.a.activeLink},"Profile")),o.a.createElement("div",{className:"".concat(p.a.item," ").concat(p.a.active)},o.a.createElement(d.b,{to:"/dialogs",activeClassName:p.a.activeLink},"Messages")),o.a.createElement("div",{className:p.a.item},o.a.createElement(d.b,{to:"/users",activeClassName:p.a.activeLink},"Users")),o.a.createElement("div",{className:p.a.item},o.a.createElement("div",null,"News")),o.a.createElement("div",{className:p.a.item},o.a.createElement("div",null,"Music")),o.a.createElement("div",{className:p.a.item},o.a.createElement(d.b,{to:"/settings",activeClassName:p.a.activeLink},"Settings"))),o.a.createElement("div",{className:p.a.friends},"friends"))},h=n(32),E=n(12),_=n(7),v=n.n(_),b=n(16),O=n(54),P=n(10),S=n(147).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"48080886-eec4-4752-8391-b5f4271f9163"}}),y={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return S.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},unFollow:function(e){return S.delete("follow/".concat(e))},Follow:function(e){return S.post("follow/".concat(e))},getProfile:function(e){return w.getProfile(e)}},w={getProfile:function(e){return S.get("profile/"+e)},getStatus:function(e){return S.get("profile/status/"+e)},updateStatus:function(e){return S.put("profile/status/",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),S.put("profile/photo/",t,{headers:{"Content-Type":"multipart/form-data"}})},saveProfile:function(e){return S.put("profile",e)}},k=function(){return S.get("auth/me")},N=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return S.post("auth/login",{email:e,password:t,rememberMe:n,captcha:a})},j=function(){return S.delete("auth/login")},C=function(){return S.get("security/get-captcha-url")},I=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(P.a)({},e,{},a):e}))},T={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},U=function(e){return{type:"FOLLOW",userId:e}},L=function(e){return{type:"UNFOLLOW",userId:e}},A=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},x=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},F=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},M=function(){var e=Object(b.a)(v.a.mark((function e(t,n,a,r){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(F(!0,n)),e.next=3,a(n);case 3:0===e.sent.data.resultCode&&t(r(n)),t(F(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(P.a)({},e,{users:I(e.users,t.userId,"id",{followed:!0})});case"UNFOLLOW":return Object(P.a)({},e,{users:I(e.users,t.userId,"id",{followed:!1})});case"SET_USERS":return Object(P.a)({},e,{users:t.users});case"SET_CURRENT_PAGE":return Object(P.a)({},e,{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(P.a)({},e,{totalUsersCount:t.count});case"TOGGLE_IS_FETCHING":return Object(P.a)({},e,{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(P.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(O.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},R=n(65),D=n(148),z=n.n(D),G=function(e){return o.a.createElement("span",{style:{"margin-left":"20px"}},o.a.createElement("img",{src:z.a,alt:""}))},H=n(51),V=n(45),W=n(55),J=n.n(W),K=n(64),X=n.n(K),Z=function(e){for(var t=e.totalItemsCount,n=e.pageSize,a=e.currentPage,s=e.onPageChanged,c=e.portionSize,i=void 0===c?10:c,l=Math.ceil(t/n),u=[],m=1;m<=l;m++)u.push(m);var f=Math.ceil(l/i),p=Object(r.useState)(1),d=Object(V.a)(p,2),g=d[0],h=d[1],E=(g-1)*i+1,_=g*i;return o.a.createElement("div",{className:X()(J.a.paginator)},g>1&&o.a.createElement("button",{className:J.a.button,onClick:function(){h(g-1)}},"PREV"),u.filter((function(e){return e>=E&&e<=_})).map((function(e){return o.a.createElement("span",{className:X()(Object(H.a)({},J.a.selectedPage,a===e),J.a.pageNumber),key:e,onClick:function(t){s(e)}},e)})),f>g&&o.a.createElement("button",{className:J.a.button,onClick:function(){h(g+1)}},"NEXT"))},q=n(33),Y=n.n(q),Q=n(49),$=n.n(Q),ee=function(e){var t=e.user,n=e.folowingInProgress,a=e.unfollow,r=e.follow;return o.a.createElement("div",{className:Y.a.user},o.a.createElement("div",{className:Y.a.photo},o.a.createElement(d.b,{to:"profile/"+t.id},o.a.createElement("img",{src:null!=t.photos.small?t.photos.small:$.a,className:Y.a.photo,alt:""}))),o.a.createElement("div",{className:Y.a.fol},t.followed?o.a.createElement("button",{disabled:n.some((function(e){return e===t.id})),className:Y.a.unfollow,onClick:function(){a(t.id)}},"Unfollow"):o.a.createElement("button",{disabled:n.some((function(e){return e===t.id})),className:Y.a.follow,onClick:function(){r(t.id)}},"Follow")),o.a.createElement("div",{className:Y.a.discription},o.a.createElement("div",{className:Y.a.name},t.name),o.a.createElement("div",null,t.status)))},te=function(e){var t=e.currentPage,n=e.totalUsersCount,a=e.pageSize,r=e.onPageChanged,s=e.isFetching,c=e.users,i=Object(R.a)(e,["currentPage","totalUsersCount","pageSize","onPageChanged","isFetching","users"]);return o.a.createElement("div",null,o.a.createElement(Z,{currentPage:t,onPageChanged:r,pageSize:a,totalItemsCount:n}),o.a.createElement("div",null,s?o.a.createElement(G,null):null,c.map((function(e){return o.a.createElement(ee,{user:e,followingInProgress:i.followingInProgress,unfollow:i.unfollow,follow:i.follow,key:e.id})}))))},ne=n(5),ae=n(149),re=Object(ae.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),oe=function(e){return e.usersPage.pageSize},se=function(e){return e.usersPage.totalUsersCount},ce=function(e){return e.usersPage.currentPage},ie=function(e){return e.usersPage.isFetching},le=function(e){return e.usersPage.folowingInProgress},ue=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){var n=e.props.pageSize;e.props.getUsers(t,n)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,n=e.pageSize;this.props.getUsers(t,n)}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(te,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,unfollow:this.props.unfollow,follow:this.props.follow,followingInProgress:this.props.followingInProgress,isFetching:this.props.isFetching}))}}]),n}(o.a.Component),me=Object(ne.compose)(Object(E.connect)((function(e){return{users:re(e),pageSize:oe(e),totalUsersCount:se(e),currentPage:ce(e),isFetching:ie(e),followingInProgress:le(e)}}),{follow:function(e){return function(){var t=Object(b.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(n,e,y.Follow.bind(y),U);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(b.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(n,e,y.unFollow.bind(y),L);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setCurrentPage:A,toggleFollowingProgress:F,getUsers:function(e,t){return function(){var n=Object(b.a)(v.a.mark((function n(a){var r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(x(!0)),a(A(e)),n.next=4,y.getUsers(e,t);case 4:r=n.sent,a(x(!1)),a({type:"SET_USERS",users:r.items}),a({type:"SET_TOTAL_USERS_COUNT",count:r.totalCount});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}))(ue),fe=n(9),pe=n.n(fe),de=function(e){var t=Object(r.useState)(!1),n=Object(V.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(e.status),i=Object(V.a)(c,2),l=i[0],u=i[1];Object(r.useEffect)((function(){u(e.status)}),[e.status]);return o.a.createElement("div",null,!a&&o.a.createElement("div",null,o.a.createElement("span",{className:pe.a.status,onDoubleClick:function(){s(!0)}},e.status||"----")),a&&o.a.createElement("div",null,o.a.createElement("input",{onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){s(!1),e.updateStatus(l)},value:l})))},ge=n(44),he=n.n(ge),Ee=n(142),_e=n(46),ve=n.n(_e),be=function(e){e.input;var t=e.meta,n=t.touched,a=t.error,r=e.children,s=n&&a;return o.a.createElement("div",{className:he.a.formControl+" "+(s?he.a.error:"")},o.a.createElement("div",null,r),s&&o.a.createElement("span",null,a))},Oe=function(e){var t=e.input,n=(e.meta,e.child,Object(R.a)(e,["input","meta","child"]));return o.a.createElement(be,e,o.a.createElement("textarea",Object.assign({},t,n)))},Pe=function(e){var t=e.input,n=(e.meta,e.child,Object(R.a)(e,["input","meta","child"]));return o.a.createElement(be,e,o.a.createElement("input",Object.assign({},t,n)))},Se=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];return o.a.createElement("div",{className:c[0]},o.a.createElement("div",{className:c[1]},o.a.createElement(Ee.a,Object.assign({placeholder:e,name:t,validate:n,component:a},r))),o.a.createElement("div",{className:c[2]},s))},ye=n(143),we=Object(ye.a)({form:"edit-profile"})((function(e){var t=e.profile,n=e.handleSubmit,a=e.error,r=e.status,s=e.updateStatus;return o.a.createElement("form",{className:pe.a.form,onSubmit:n},o.a.createElement("span",{className:pe.a.info},o.a.createElement("div",{className:pe.a.name},Se("Full name","fullName",[],Pe)),o.a.createElement(de,{status:r,updateStatus:s}),o.a.createElement("div",null,o.a.createElement("div",null,"About me:"),Se("About me","aboutMe",[],Oe)),o.a.createElement("div",null,o.a.createElement("div",null,"Looking for a job:")," ",Se("","lookingForAJob",[],Pe,{type:"checkbox"})),o.a.createElement("div",null,o.a.createElement("div",null,"My professional skills:"),Se("My professional skills","lookingForAJobDescription",[],Oe)),o.a.createElement("div",null,o.a.createElement("button",{className:pe.a.save},"save")),a&&o.a.createElement("div",{className:he.a.formSummaryError},a)),o.a.createElement("div",null,"My contacts: ",Object.keys(t.contacts).map((function(e){return o.a.createElement("div",{key:e,className:pe.a.contact},o.a.createElement("div",{className:pe.a.contactsEdit},o.a.createElement("div",{className:pe.a.contactKey},e,":"),o.a.createElement("div",{className:pe.a.contactValue},Se("http://"+e+".com","contacts."+e,[],Pe))))}))))})),ke=function(e){var t=e.profile,n=e.isOwner,a=e.goToEditMode,r=e.status,s=e.updateStatus;return o.a.createElement("span",{className:pe.a.form},o.a.createElement("span",{className:pe.a.info},o.a.createElement("div",{className:pe.a.name},t.fullName),o.a.createElement(de,{status:r,updateStatus:s}),o.a.createElement("span",{className:pe.a.contacts},o.a.createElement("div",{className:pe.a.contactsMenuName,onClick:function(){document.getElementById("contacts").style.display="block"},onDoubleClick:function(){document.getElementById("contacts").style.display="none"}},"My contacts"),o.a.createElement("div",{id:"contacts",className:pe.a.contactsMenu},Object.keys(t.contacts).map((function(e){return o.a.createElement(Ne,{key:e,contactTitle:e,contactValue:t.contacts[e]})}))))),o.a.createElement("span",{className:pe.a.description},o.a.createElement("div",null,o.a.createElement("div",null,"\u2022About me: "),o.a.createElement("span",{className:pe.a.tab},t.aboutMe)),o.a.createElement("div",null,o.a.createElement("span",null,"\u2022Looking for a job:")," ",t.lookingForAJob?"yes":"no"),t.lookingForAJob&&o.a.createElement("div",null,o.a.createElement("div",null,"\u2022My professional skills:")," ",o.a.createElement("span",{className:pe.a.tab},t.lookingForAJobDescription)),n&&o.a.createElement("div",null,o.a.createElement("button",{className:pe.a.edit,onClick:a},"Edit info"))))},Ne=function(e){var t=e.contactTitle,n=e.contactValue;return n?o.a.createElement("div",null,t,": ",o.a.createElement("a",{className:pe.a.contactsLink,href:n},n)):null},je=function(e){var t=e.profile,n=e.status,a=e.updateStatus,s=e.isOwner,c=e.savePhoto,i=e.saveProfile,l=Object(r.useState)(!1),u=Object(V.a)(l,2),m=u[0],f=u[1];return o.a.createElement("div",{className:pe.a.discriptionBlock},o.a.createElement("div",{className:pe.a.photo},s&&o.a.createElement("input",{id:"upl",type:"file",className:pe.a.button,onChange:function(e){e.target.files.length&&c(e.target.files[0])}}),o.a.createElement("label",{htmlFor:"upl"},o.a.createElement("img",{src:t.photos.large||$.a,className:pe.a.mainPhoto,alt:""}))),o.a.createElement("div",{className:pe.a.discription},m?o.a.createElement(we,{initialValues:t,profile:t,onSubmit:function(e){i(e).then((function(){f(!1)}))},status:n,updateStatus:a}):o.a.createElement(ke,{goToEditMode:function(){f(!0)},profile:t,isOwner:s,status:n,updateStatus:a})))},Ce=n(66),Ie=n.n(Ce),Te=n(56),Ue=n.n(Te),Le=function(e){return o.a.createElement("div",{className:Ue.a.item},o.a.createElement("img",{className:Ue.a.img,src:$.a,alt:""}),o.a.createElement("div",{className:Ue.a.mes},e.message),o.a.createElement("span",{className:Ue.a.likes,onClick:function(){e.addLikes(e.id)}},o.a.createElement("span",{className:Ue.a.count},e.likesCount+" "),"likes"))},Ae=n(134),xe=n.n(Ae),Fe=n(138),Me=function(e){if(!e)return"Field is required"},Be=(a=50,function(e){if(e.length>a)return"Max length is ".concat(a," symbols")}),Re=n.n(Fe)()({form:"profileAddPostForm"})((function(e){return o.a.createElement("form",{onSubmit:e.handleSubmit},o.a.createElement("div",null,o.a.createElement(xe.a,{className:Ie.a.area,cols:"25",rows:"4",component:Oe,name:"newPostText",placeholder:"Enter your post",validate:[Me,Be]})),o.a.createElement("div",null,o.a.createElement("button",{className:Ie.a.button},"Add post")))})),De=o.a.memo((function(e){var t=e.posts.map((function(t){return o.a.createElement(Le,{message:t.message,likesCount:t.likesCount,key:t.id,id:t.id,profile:e.profile,addLikes:e.addLikes})}));return o.a.createElement("div",{className:Ie.a.postsBlock},o.a.createElement("h3",null,"My posts"),o.a.createElement(Re,{onSubmit:function(t){e.addPost(t.newPostText),t.newPostText=" "}}),o.a.createElement("div",{className:Ie.a.posts},t))})),ze=n(36),Ge={posts:[{id:1,message:"It is my first post",likesCount:12},{id:2,message:"It is my website",likesCount:1},{id:3,message:"Hi, how are you?",likesCount:21},{id:4,message:"I want to become a developer",likesCount:11},{id:5,message:"Say me about you",likesCount:1}],profile:null,status:""},He=function(e){return{type:"SET_STATUS",status:e}},Ve=function(e){return function(){var t=Object(b.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.getProfile(e);case 2:a=t.sent,n({type:"SET_USER_PROFILE",profile:a.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var n={id:6,message:t.newPostText,likesCount:0};return Object(P.a)({},e,{posts:[].concat(Object(O.a)(e.posts),[n])});case"SET_STATUS":return Object(P.a)({},e,{status:t.status});case"SET_USER_PROFILE":return Object(P.a)({},e,{profile:t.profile});case"SAVE_PHOTO_SUCCESS":return Object(P.a)({},e,{profile:Object(P.a)({},e.profile,{photos:t.photos})});case"DELETE_POST":return Object(P.a)({},e,{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case"ADD_LIKES":return Object(P.a)({},e,{posts:e.posts.map((function(e){return e.id===t.postId?Object(P.a)({},e,{likesCount:e.likesCount+1}):e}))});default:return e}},Je=Object(E.connect)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText,profile:e.profilePage.profile}}),(function(e){return{addPost:function(t){e(function(e){return{type:"ADD-POST",newPostText:e}}(t))},addLikes:function(t){e({type:"ADD_LIKES",postId:t})}}}))(De),Ke=function(e){return e.profile?o.a.createElement("div",null,o.a.createElement(je,{isOwner:e.isOwner,savePhoto:e.savePhoto,profile:e.profile,status:e.status,saveProfile:e.saveProfile,updateStatus:e.updateStatus}),o.a.createElement(Je,null)):o.a.createElement(G,null)},Xe=n(140),Ze=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(Ke,Object.assign({},this.props,{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto})))}}]),n}(o.a.Component),qe=Object(ne.compose)(Object(E.connect)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.id,isAuth:e.auth.isAuth}}),{getUserProfile:Ve,getStatus:function(e){return function(){var t=Object(b.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.getStatus(e);case 2:a=t.sent,n(He(a.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(b.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(He(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(b.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.savePhoto(e);case 2:a=t.sent,n({type:"SAVE_PHOTO_SUCCESS",photos:a.data.data.photos});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(b.a)(v.a.mark((function t(n,a){var r,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.id,t.next=3,w.saveProfile(e);case 3:if(0!==(o=t.sent).data.resultCode){t.next=8;break}n(Ve(r)),t.next=10;break;case 8:return n(Object(ze.a)("edit-profile",{_error:o.data.messages[0]})),t.abrupt("return",Promise.reject(o.data.messages[0]));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),h.g,Xe.a)(Ze),Ye=n(37),Qe=n.n(Ye),$e=n(150),et=n.n($e),tt=function(e){return o.a.createElement("div",{className:Qe.a.header},o.a.createElement(d.b,{to:"/profile/",activeClassName:Qe.a.activeLink},o.a.createElement("img",{src:et.a,alt:""})),o.a.createElement(h.a,{to:"/login"}),o.a.createElement("div",{className:Qe.a.loginBlock},e.isAuth?o.a.createElement("div",null,o.a.createElement(d.b,{to:"/profile",className:Qe.a.userName},e.login),o.a.createElement("div",{className:Qe.a.logout},o.a.createElement("button",{onClick:e.logout,className:Qe.a.button},"log out"))):o.a.createElement("div",{className:Qe.a.login},o.a.createElement(d.b,{to:"login"},"Log in"))))},nt={id:null,email:null,login:null,isAuth:!1,captchaUrl:null},at=function(e,t,n,a){return{type:"auth/SET_USER_DATA",payload:{id:e,email:t,login:n,isAuth:a}}},rt=function(e){return{type:"GET_CAPTCHA_URL_SUCCESS",payload:{captchaUrl:e}}},ot=function(){return function(){var e=Object(b.a)(v.a.mark((function e(t){var n,a,r,o,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:0===(n=e.sent).data.resultCode&&(a=n.data.data,r=a.id,o=a.email,s=a.login,t(at(r,o,s,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},st=function(){return function(){var e=Object(b.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:n=e.sent,a=n.data.url,t(rt(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_USER_DATA":case"GET_CAPTCHA_URL_SUCCESS":return Object(P.a)({},e,{},t.payload);default:return e}},it=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement(tt,this.props)}}]),n}(o.a.Component),lt=Object(E.connect)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:0===e.sent.data.resultCode&&t(at(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(it),ut=Object(ye.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,a=e.captchaUrl;return o.a.createElement("form",{onSubmit:t},Se("Email","email",[Me],Pe),Se("Password","password",[Me],Pe,{type:"password"}),Se(null,"rememberMe",[],Pe,{type:"checkbox"},"remember me",[ve.a.s1,ve.a.s2,ve.a.s3]),a&&o.a.createElement("img",{src:a,alt:""}),a&&Se("Symbols from image","captcha",[Me],Pe,{}),n&&o.a.createElement("div",{className:he.a.formSummaryError},n),o.a.createElement("div",null,o.a.createElement("button",{className:ve.a.button},"Log In")))})),mt=Object(E.connect)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),{login:function(e,t,n,a){return function(){var r=Object(b.a)(v.a.mark((function r(o){var s,c;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,N(e,t,n,a);case 2:0===(s=r.sent).data.resultCode?o(ot()):(10===s.data.resultCode&&o(st()),c=s.data.messages.length>0?s.data.messages[0]:"Some error",o(Object(ze.a)("login",{_error:c})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return e.isAuth?o.a.createElement(h.a,{to:"/profile"}):o.a.createElement("div",{className:ve.a.login},o.a.createElement("h2",null,"LOG IN"),o.a.createElement(ut,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)},captchaUrl:e.captchaUrl}))})),ft={initialized:!1},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(P.a)({},e,{initialized:!0});default:return e}},dt=n(141),gt={},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt;arguments.length>1&&arguments[1];return e},Et=n(151),_t=n(144),vt={blackThemeButton:!1,sideStyle:"side"},bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRESS_BLACK_THEME_BUTTON":return Object(P.a)({},e,{blackThemeButton:!e.blackThemeButton});default:return e}},Ot=Object(ne.combineReducers)({profilePage:We,dialogsPage:dt.a,sidebar:ht,usersPage:B,auth:ct,form:_t.a,app:pt,settings:bt}),Pt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ne.compose,St=Object(ne.createStore)(Ot,Pt(Object(ne.applyMiddleware)(Et.a)));window._store_=St;var yt=St,wt=n(67),kt=n.n(wt),Nt=function(e){return o.a.createElement("div",{className:kt.a.settings},o.a.createElement("span",{className:kt.a.label},"Night theme"),o.a.createElement("span",{onClick:function(){e.blackThemeButton?(e.onBlackThemeButton(),document.getElementById("side").style.backgroundColor="white",document.getElementById("wrapper").style.backgroundColor="ghostwhite"):(e.onBlackThemeButton(),document.getElementById("side").style.backgroundColor="#72879c",document.getElementById("wrapper").style.backgroundColor="#586775")},className:X()(Object(H.a)({},kt.a.switchOn,e.blackThemeButton),kt.a.button)}))},jt=Object(E.connect)((function(e){return{blackThemeButton:e.settings.blackThemeButton,buttonStyle:e.settings.buttonStyle}}),(function(e){return{onBlackThemeButton:function(t){e({type:"PRESS_BLACK_THEME_BUTTON"})}}}))(Nt),Ct=o.a.lazy((function(){return n.e(3).then(n.bind(null,337))})),It=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return o.a.createElement("div",{className:"appWrapper"},o.a.createElement("div",{id:"side",className:this.props.sideStyle}),o.a.createElement("div",{className:"head"},o.a.createElement(lt,null)),o.a.createElement("div",{className:"nav"},o.a.createElement(g,null)),o.a.createElement("div",{id:"wrapper",className:"appWrapperContent"},o.a.createElement(h.d,null,"               ",o.a.createElement(h.b,{path:"/dialogs",render:(e=Ct,function(t){return o.a.createElement(o.a.Suspense,{fallback:o.a.createElement("div",null,"Loading...")},o.a.createElement(e,t))})}),o.a.createElement(h.b,{path:"/profile/:userId?",render:function(){return o.a.createElement(qe,null)}}),o.a.createElement(h.b,{path:"/users",render:function(){return o.a.createElement(me,null)}}),o.a.createElement(h.b,{exact:!0,path:"/login",render:function(){return o.a.createElement(mt,null)}}),o.a.createElement(h.b,{exact:!0,path:"/settings",render:function(){return o.a.createElement(jt,null)}}),o.a.createElement(h.b,{path:"*",render:function(){return o.a.createElement("h1",null,"404 NOT FOUND")}}))));var e}}]),n}(o.a.Component),Tt=Object(ne.compose)(h.g,Object(E.connect)((function(e){return{initialized:e.app.initialized,sideStyle:e.settings.sideStyle}}),{initializeApp:function(){return function(e){e(ot()).then((function(){e({type:"INITIALIZED_SUCCESS"})}))}}}))(It),Ut=function(e){return o.a.createElement(d.a,null,o.a.createElement(E.Provider,{store:yt},o.a.createElement(Tt,null)))};c.a.render(o.a.createElement(Ut,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},37:function(e,t,n){e.exports={header:"Header_header__2S7ee",loginBlock:"Header_loginBlock__349YX",userName:"Header_userName__TVQeU",logout:"Header_logout__1U7Jq",login:"Header_login__2ZaXp",button:"Header_button__3AOAn"}},44:function(e,t,n){e.exports={formControl:"FormsControls_formControl__KJHG6",error:"FormsControls_error__2iS7F",formSummaryError:"FormsControls_formSummaryError__2Z5fj"}},46:function(e,t,n){e.exports={login:"Login_login__1mx91",button:"Login_button__y-y6T",s1:"Login_s1__1Mhuj",s2:"Login_s2__13kQf",s3:"Login_s3__A7rbK"}},49:function(e,t,n){e.exports=n.p+"static/media/user.8b1dbb1f.png"},55:function(e,t,n){e.exports={paginator:"Paginator_paginator__sV1Wk",pageNumber:"Paginator_pageNumber__2hAk5",selectedPage:"Paginator_selectedPage__to5Hh",button:"Paginator_button__28PL3"}},56:function(e,t,n){e.exports={item:"Post_item__FKWLk",img:"Post_img__21o-o",mes:"Post_mes__td-LE",likes:"Post_likes__LVZOU",count:"Post_count__vNeRN"}},66:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__PVv8X",posts:"MyPosts_posts__1_mZ_",button:"MyPosts_button__1Fkxg",area:"MyPosts_area__lk7I7"}},67:function(e,t,n){e.exports={settings:"Settings_settings__yplet",button:"Settings_button__2fj6E",switchOn:"Settings_switchOn__1Q9dc",label:"Settings_label__3_dls"}},9:function(e,t,n){e.exports={discriptionBlock:"ProfileInfo_discriptionBlock__nHaqE",photo:"ProfileInfo_photo__2mVUa",mainPhoto:"ProfileInfo_mainPhoto__2Jymk",button:"ProfileInfo_button__3nRMG",form:"ProfileInfo_form__35zYX",info:"ProfileInfo_info__1r8Ls",description:"ProfileInfo_description__1GUTd",contacts:"ProfileInfo_contacts__1Z3we",contactsEdit:"ProfileInfo_contactsEdit__2K0eB",contactKey:"ProfileInfo_contactKey__zdFv_",contactValue:"ProfileInfo_contactValue__3S9p6",contactsLink:"ProfileInfo_contactsLink__JvaC6",contactsMenu:"ProfileInfo_contactsMenu__1PsEm",contactsMenuName:"ProfileInfo_contactsMenuName__2mjW2",name:"ProfileInfo_name__3zy0Q",status:"ProfileInfo_status__3WJYX",tab:"ProfileInfo_tab__1dA_n",save:"ProfileInfo_save__3ye6s",edit:"ProfileInfo_edit__ccIe6"}}},[[177,1,2]]]);
//# sourceMappingURL=main.59b1ad68.chunk.js.map