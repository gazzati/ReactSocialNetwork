(this.webpackJsonpReactSocialNetwork=this.webpackJsonpReactSocialNetwork||[]).push([[0],{140:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(25),r=a(26),o=a(28),s=a(27),c=a(33),i=a(0),l=a.n(i),u=a(12),m=function(e){return{isAuth:e.auth.isAuth}},f=function(e){var t=function(t){Object(o.a)(i,t);var a=Object(s.a)(i);function i(){return Object(n.a)(this,i),a.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){return this.props.isAuth?l.a.createElement(e,this.props):l.a.createElement(c.a,{to:"/login"})}}]),i}(l.a.Component);return Object(u.connect)(m)(t)}},141:function(e,t,a){"use strict";a.d(t,"b",(function(){return s}));var n=a(53),r=a(10),o={dialogs:[{id:1,name:"Dimych"},{id:2,name:"Andrew"},{id:3,name:"Sveta"},{id:4,name:"Sasha"},{id:5,name:"Viktor"},{id:6,name:"Valera"}],messages:[{id:1,message:"Hi"},{id:2,message:"How is your girlfriend?"},{id:3,message:"See you"},{id:4,message:"I study in MIREA"},{id:5,message:"Where is your car"}]},s=function e(t){return{type:e,newMessageBody:t}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":var a=t.newMessageBody;return Object(r.a)({},e,{messages:[].concat(Object(n.a)(e.messages),[{id:7,message:a}])});default:return e}}},148:function(e,t,a){e.exports=a.p+"static/media/preloader.3ffaf718.svg"},150:function(e,t,a){e.exports=a.p+"static/media/reactIcon.a79469da.png"},17:function(e,t,a){e.exports={nav:"Navbar_nav__3q2WL",list:"Navbar_list__1sMwt",friends:"Navbar_friends__2V8Ze",item:"Navbar_item__2oMa_",activeLink:"Navbar_activeLink__1sAdL"}},177:function(e,t,a){e.exports=a(334)},182:function(e,t,a){},183:function(e,t,a){},334:function(e,t,a){"use strict";a.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var n,r,o=a(0),s=a.n(o),c=a(78),i=a.n(c),l=(a(182),a(25)),u=a(26),m=a(28),f=a(27),p=(a(183),a(17)),d=a.n(p),g=a(15),E=function(){return s.a.createElement("nav",{className:d.a.nav},s.a.createElement("div",{className:d.a.list},s.a.createElement("div",{className:d.a.item},s.a.createElement(g.b,{to:"/profile",activeClassName:d.a.activeLink},"Profile")),s.a.createElement("div",{className:"".concat(d.a.item," ").concat(d.a.active)},s.a.createElement(g.b,{to:"/dialogs",activeClassName:d.a.activeLink},"Messages")),s.a.createElement("div",{className:d.a.item},s.a.createElement(g.b,{to:"/users",activeClassName:d.a.activeLink},"Users")),s.a.createElement("div",{className:d.a.item},s.a.createElement("div",null,"News")),s.a.createElement("div",{className:d.a.item},s.a.createElement("div",null,"Music")),s.a.createElement("div",{className:d.a.item},s.a.createElement(g.b,{to:"/settings",activeClassName:d.a.activeLink},"Settings"))),s.a.createElement("div",{className:d.a.friends},"Friends"))},h=a(33),_=a(12),v=a(7),b=a.n(v),O=a(16),S=a(53),P=a(10),y=a(147),w=a.n(y).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"c7670d27-1643-46ec-bb96-bd2e37e02a3e"}}),N={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return w.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},unFollow:function(e){return w.delete("follow/".concat(e))},Follow:function(e){return w.post("follow/".concat(e))},getProfile:function(e){return k.getProfile(e)}},k={getProfile:function(e){return w.get("profile/"+e)},getStatus:function(e){return w.get("profile/status/"+e)},updateStatus:function(e){return w.put("profile/status/",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),w.put("profile/photo/",t,{headers:{"Content-Type":"multipart/form-data"}})},saveProfile:function(e){return w.put("profile",e)}};!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(n||(n={})),function(e){e[e.CaptchaIsRequired=10]="CaptchaIsRequired"}(r||(r={}));var j=function(){return w.get("auth/me").then((function(e){return e.data}))},C=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return w.post("auth/login",{email:e,password:t,rememberMe:a,captcha:n}).then((function(e){return e.data}))},I=function(){return w.delete("auth/login")},T=function(){return w.get("security/get-captcha-url")},U=function(e,t,a,n){return e.map((function(e){return e[a]===t?Object(P.a)({},e,{},n):e}))},A={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},L=function(e){return{type:"FOLLOW",userId:e}},x=function(e){return{type:"UNFOLLOW",userId:e}},F=function(e){return{type:"SET_USERS",users:e}},M=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},R=function(e){return{type:"SET_TOTAL_USERS_COUNT",count:e}},B=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},D=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},z=function(){var e=Object(O.a)(b.a.mark((function e(t,a,n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(D(!0,a)),e.next=3,n(a);case 3:0===e.sent.data.resultCode&&t(r(a)),t(D(!1,a));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(P.a)({},e,{users:U(e.users,t.userId,"id",{followed:!0})});case"UNFOLLOW":return Object(P.a)({},e,{users:U(e.users,t.userId,"id",{followed:!1})});case"SET_USERS":return Object(P.a)({},e,{users:t.users});case"SET_CURRENT_PAGE":return Object(P.a)({},e,{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(P.a)({},e,{totalUsersCount:t.count});case"TOGGLE_IS_FETCHING":return Object(P.a)({},e,{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(P.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(S.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},H=a(65),V=a(37),W=a.n(V),J=a(48),K=a.n(J),q=function(e){var t=e.user,a=e.followingInProgress,n=e.unfollow,r=e.follow;return s.a.createElement("div",{className:W.a.user},s.a.createElement("div",null,s.a.createElement(g.b,{to:"profile/"+t.id},s.a.createElement("img",{src:null!=t.photos.small?t.photos.small:K.a,className:W.a.photo,alt:""}))),s.a.createElement("div",{className:W.a.fol},t.followed?s.a.createElement("button",{disabled:a.some((function(e){return e===t.id})),className:W.a.unfollow,onClick:function(){n(t.id)}},"Unfollow"):s.a.createElement("button",{disabled:a.some((function(e){return e===t.id})),className:W.a.follow,onClick:function(){r(t.id)}},"Follow")),s.a.createElement("div",{className:W.a.descriptionUser},s.a.createElement("div",{className:W.a.name},t.name),s.a.createElement("div",null,t.status)))},X=a(50),Z=a(32),Q=a(54),Y=a.n(Q),$=a(64),ee=a.n($),te=function(e){for(var t=e.totalItemsCount,a=e.pageSize,n=e.currentPage,r=e.onPageChanged,c=e.portionSize,i=void 0===c?10:c,l=Math.ceil(t/a),u=[],m=1;m<=l;m++)u.push(m);var f=Math.ceil(l/i),p=Object(o.useState)(1),d=Object(Z.a)(p,2),g=d[0],E=d[1],h=(g-1)*i+1,_=g*i;return s.a.createElement("div",{className:ee()(Y.a.paginator)},g>1&&s.a.createElement("button",{className:Y.a.button,onClick:function(){E(g-1)}},"PREV"),u.filter((function(e){return e>=h&&e<=_})).map((function(e){return s.a.createElement("div",{className:ee()(Object(X.a)({},Y.a.selectedPage,n===e),Y.a.pageNumber),key:e,onClick:function(t){r(e)}},e)})),f>g&&s.a.createElement("button",{className:Y.a.button,onClick:function(){E(g+1)}},"NEXT"))},ae=a(148),ne=a.n(ae),re=function(e){return s.a.createElement("span",{className:"preloader"},s.a.createElement("img",{src:ne.a,alt:""}))},oe=function(e){var t=e.currentPage,a=e.totalUsersCount,n=e.pageSize,r=e.onPageChanged,o=e.users,c=e.isFetching,i=Object(H.a)(e,["currentPage","totalUsersCount","pageSize","onPageChanged","users","isFetching"]);return s.a.createElement("div",null,c?null:s.a.createElement(te,{currentPage:t,onPageChanged:r,totalItemsCount:a,pageSize:n}),c?s.a.createElement(re,null):null,s.a.createElement("div",null,o.map((function(e){return s.a.createElement(q,{user:e,followingInProgress:i.followingInProgress,unfollow:i.unfollow,follow:i.follow,key:e.id})}))))},se=a(5),ce=a(149),ie=Object(ce.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),le=function(e){return e.usersPage.pageSize},ue=function(e){return e.usersPage.totalUsersCount},me=function(e){return e.usersPage.currentPage},fe=function(e){return e.usersPage.isFetching},pe=function(e){return e.usersPage.followingInProgress},de=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){var a=e.props.pageSize;e.props.getUsers(t,a)},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,a=e.pageSize;this.props.getUsers(t,a)}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(oe,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,unfollow:this.props.unfollow,follow:this.props.follow,followingInProgress:this.props.followingInProgress,isFetching:this.props.isFetching}))}}]),a}(s.a.Component),ge=Object(se.compose)(Object(_.connect)((function(e){return{users:ie(e),pageSize:le(e),totalUsersCount:ue(e),currentPage:me(e),isFetching:fe(e),followingInProgress:pe(e)}}),{follow:function(e){return function(){var t=Object(O.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:z(a,e,N.Follow.bind(N),L);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(O.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:z(a,e,N.unFollow.bind(N),x);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUsers:function(e,t){return function(){var a=Object(O.a)(b.a.mark((function a(n,r){var o;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(B(!0)),n(M(e)),a.next=4,N.getUsers(e,t);case 4:o=a.sent,n(B(!1)),n(F(o.items)),n(R(o.totalCount));case 8:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}}))(de),Ee=a(9),he=a.n(Ee),_e=function(e){var t=Object(o.useState)(!1),a=Object(Z.a)(t,2),n=a[0],r=a[1],c=Object(o.useState)(e.status),i=Object(Z.a)(c,2),l=i[0],u=i[1];Object(o.useEffect)((function(){u(e.status)}),[e.status]);return s.a.createElement("div",null,!n&&s.a.createElement("div",null,s.a.createElement("span",{className:he.a.status,onDoubleClick:function(){r(!0)}},e.status||"----")),n&&s.a.createElement("div",null,s.a.createElement("input",{onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){r(!1),e.updateStatus(l)},value:l})))},ve=a(45),be=a.n(ve),Oe=a(142),Se=function(e){var t=e.meta,a=t.touched,n=t.error,r=e.children,o=a&&n;return s.a.createElement("div",{className:be.a.formControl+" "+(o?be.a.error:"")},s.a.createElement("div",null,r),o&&s.a.createElement("span",null,n))},Pe=function(e){var t=e.input,a=(e.meta,Object(H.a)(e,["input","meta"]));return s.a.createElement(Se,e,s.a.createElement("textarea",Object.assign({},t,a)))},ye=function(e){var t=e.input,a=(e.meta,Object(H.a)(e,["input","meta"]));return s.a.createElement(Se,e,s.a.createElement("input",Object.assign({},t,a)))};function we(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return s.a.createElement("span",null,s.a.createElement(Oe.a,Object.assign({placeholder:e,name:t,validate:a,component:n},r))," ",o)}var Ne,ke=a(143),je=Object(ke.a)({form:"edit-profile"})((function(e){var t=e.profile,a=e.handleSubmit,n=e.error,r=e.status,o=e.updateStatus;return s.a.createElement("form",{className:he.a.form,onSubmit:a},s.a.createElement("span",{className:he.a.info},s.a.createElement("div",{className:he.a.name},we("Full name","fullName",[],ye)),s.a.createElement(_e,{status:r,updateStatus:o}),s.a.createElement("div",null,s.a.createElement("div",null,"About me:"),we("About me","aboutMe",[],Pe)),s.a.createElement("div",null,s.a.createElement("div",null,"Looking for a job:")," ",we("","lookingForAJob",[],ye,{type:"checkbox"})),s.a.createElement("div",null,s.a.createElement("div",null,"My professional skills:"),we("My professional skills","lookingForAJobDescription",[],Pe)),s.a.createElement("div",null,s.a.createElement("button",{className:he.a.save},"save")),n&&s.a.createElement("div",{className:be.a.formSummaryError},n)),s.a.createElement("div",{className:he.a.contacts},"My contacts: ",Object.keys(t.contacts).map((function(e){return s.a.createElement("div",{key:e},s.a.createElement("div",{className:he.a.contactsEdit},s.a.createElement("div",{className:he.a.contactKey},e,":"),s.a.createElement("div",{className:he.a.contactValue},we("http://"+e+".com","contacts."+e,[],ye))))}))))})),Ce=function(e){var t=e.profile,a=e.isOwner,n=e.goToEditMode,r=e.status,o=e.updateStatus;return s.a.createElement("div",{className:he.a.form},s.a.createElement("div",{className:he.a.info},s.a.createElement("div",{className:he.a.name},t.fullName),s.a.createElement(_e,{status:r,updateStatus:o}),s.a.createElement("span",{className:he.a.contacts},s.a.createElement("div",{className:he.a.contactsMenuName,onClick:function(){document.getElementById("contacts").style.display="block"},onDoubleClick:function(){document.getElementById("contacts").style.display="none"}},"My contacts"),s.a.createElement("div",{id:"contacts",className:he.a.contactsMenu},Object.keys(t.contacts).map((function(e){return s.a.createElement(Ie,{key:e,contactTitle:e,contactValue:t.contacts[e]})}))))),s.a.createElement("div",{className:he.a.description},s.a.createElement("div",null,s.a.createElement("div",null,"\u2022About me: "),s.a.createElement("span",{className:he.a.tab},t.aboutMe)),s.a.createElement("div",null,s.a.createElement("span",null,"\u2022Looking for a job:")," ",t.lookingForAJob?"yes":"no"),t.lookingForAJob&&s.a.createElement("div",null,s.a.createElement("div",null,"\u2022My professional skills:")," ",s.a.createElement("span",{className:he.a.tab},t.lookingForAJobDescription)),a&&s.a.createElement("div",null,s.a.createElement("button",{className:he.a.edit,onClick:n},"Edit info"))))},Ie=function(e){var t=e.contactTitle,a=e.contactValue;return a?s.a.createElement("div",null,t,": ",s.a.createElement("a",{className:he.a.contactsLink,href:a},a)):null},Te=function(e){var t=e.profile,a=e.status,n=e.updateStatus,r=e.isOwner,c=e.savePhoto,i=e.saveProfile,l=Object(o.useState)(!1),u=Object(Z.a)(l,2),m=u[0],f=u[1];return s.a.createElement("div",{className:he.a.descriptionBlock},s.a.createElement("div",{className:he.a.photo},r&&s.a.createElement("input",{id:"upl",type:"file",className:he.a.button,onChange:function(e){e.target.files.length&&c(e.target.files[0])}}),s.a.createElement("label",{htmlFor:"upl"},s.a.createElement("img",{src:t.photos.large||K.a,className:he.a.mainPhoto,alt:""}))),s.a.createElement("div",{className:he.a.info_description},m?s.a.createElement(je,{initialValues:t,profile:t,onSubmit:function(e){i(e).then((function(){f(!1)}))},status:a,updateStatus:n}):s.a.createElement(Ce,{goToEditMode:function(){f(!0)},profile:t,isOwner:r,status:a,updateStatus:n})))},Ue=a(66),Ae=a.n(Ue),Le=a(55),xe=a.n(Le),Fe=function(e){return s.a.createElement("div",{className:xe.a.item},s.a.createElement("img",{className:xe.a.img,src:K.a,alt:""}),s.a.createElement("div",{className:xe.a.mes},e.message),s.a.createElement("span",{className:xe.a.likes,onClick:function(){e.addLikes(e.id)}},s.a.createElement("span",{className:xe.a.count},e.likesCount+" "),"likes"))},Me=a(134),Re=a.n(Me),Be=a(138),De=function(e){if(!e)return"Field is required"},ze=(Ne=50,function(e){if(e.length>Ne)return"Max length is ".concat(Ne," symbols")}),Ge=a.n(Be)()({form:"profileAddPostForm"})((function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit},s.a.createElement("span",null,s.a.createElement(Re.a,{className:Ae.a.area,cols:"25",rows:"4",component:Pe,name:"newPostText",placeholder:"Enter your post",validate:[De,ze]})),s.a.createElement("span",null,s.a.createElement("button",{className:Ae.a.button},"Add post")))})),He=s.a.memo((function(e){var t=e.posts.map((function(t){return s.a.createElement(Fe,{message:t.message,likesCount:t.likesCount,key:t.id,id:t.id,profile:e.profile,addLikes:e.addLikes})}));return s.a.createElement("div",{className:Ae.a.postsBlock},s.a.createElement("h3",null,"My posts"),s.a.createElement(Ge,{onSubmit:function(t){e.addPost(t.newPostText),t.newPostText=" "}}),s.a.createElement("div",{className:Ae.a.posts},t))})),Ve=a(36),We={posts:[{id:1,message:"It is my first post",likesCount:12},{id:2,message:"It is my website",likesCount:1},{id:3,message:"Hi, how are you?",likesCount:21},{id:4,message:"I want to become a developer",likesCount:11},{id:5,message:"Say me about you",likesCount:1}],profile:null,status:""},Je=function(e){return{type:"SET_STATUS",status:e}},Ke=function(e){return function(){var t=Object(O.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.getProfile(e);case 2:n=t.sent,a({type:"SET_USER_PROFILE",profile:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var a={id:6,message:t.newPostText,likesCount:0};return Object(P.a)({},e,{posts:[].concat(Object(S.a)(e.posts),[a])});case"SET_STATUS":return Object(P.a)({},e,{status:t.status});case"SET_USER_PROFILE":return Object(P.a)({},e,{profile:t.profile});case"SAVE_PHOTO_SUCCESS":return Object(P.a)({},e,{profile:Object(P.a)({},e.profile,{photos:t.photos})});case"DELETE_POST":return Object(P.a)({},e,{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case"ADD_LIKES":return Object(P.a)({},e,{posts:e.posts.map((function(e){return e.id===t.postId?Object(P.a)({},e,{likesCount:e.likesCount+1}):e}))});default:return e}},Xe=Object(_.connect)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText,profile:e.profilePage.profile}}),(function(e){return{addPost:function(t){e(function(e){return{type:"ADD-POST",newPostText:e}}(t))},addLikes:function(t){e({type:"ADD_LIKES",postId:t})}}}))(He),Ze=function(e){return e.profile?s.a.createElement("div",null,s.a.createElement(Te,{isOwner:e.isOwner,savePhoto:e.savePhoto,profile:e.profile,status:e.status,saveProfile:e.saveProfile,updateStatus:e.updateStatus}),s.a.createElement(Xe,null)):s.a.createElement(re,null)},Qe=a(140),Ye=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(Ze,Object.assign({},this.props,{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto})))}}]),a}(s.a.Component),$e=Object(se.compose)(Object(_.connect)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.id,isAuth:e.auth.isAuth}}),{getUserProfile:Ke,getStatus:function(e){return function(){var t=Object(O.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.getStatus(e);case 2:n=t.sent,a(Je(n.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(O.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.updateStatus(e);case 2:0===t.sent.data.resultCode&&a(Je(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(O.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.savePhoto(e);case 2:n=t.sent,a({type:"SAVE_PHOTO_SUCCESS",photos:n.data.data.photos});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(O.a)(b.a.mark((function t(a,n){var r,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.id,t.next=3,k.saveProfile(e);case 3:if(0!==(o=t.sent).data.resultCode){t.next=8;break}a(Ke(r)),t.next=10;break;case 8:return a(Object(Ve.a)("edit-profile",{_error:o.data.messages[0]})),t.abrupt("return",Promise.reject(o.data.messages[0]));case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}}),h.g,Qe.a)(Ye),et=a(38),tt=a.n(et),at=a(150),nt=a.n(at),rt=function(e){return s.a.createElement("div",{className:tt.a.header},s.a.createElement(g.b,{to:"/profile/",className:tt.a.logo},s.a.createElement("img",{src:nt.a,alt:""})),s.a.createElement(h.a,{to:"/login"}),s.a.createElement("div",{className:tt.a.loginBlock},e.isAuth?s.a.createElement("div",null,s.a.createElement(g.b,{to:"/profile",className:tt.a.userName},e.login),s.a.createElement("div",{className:tt.a.logout},s.a.createElement("button",{onClick:e.logout,className:tt.a.button},"log out"))):s.a.createElement("div",{className:tt.a.login},s.a.createElement(g.b,{to:"login"},"Log in"))))},ot={id:null,email:null,login:null,isAuth:!1,captchaUrl:null},st=function(e,t,a,n){return{type:"auth/SET_USER_DATA",payload:{id:e,email:t,login:a,isAuth:n}}},ct=function(e){return{type:"GET_CAPTCHA_URL_SUCCESS",payload:{captchaUrl:e}}},it=function(){return function(){var e=Object(O.a)(b.a.mark((function e(t){var a,r,o,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:(a=e.sent).resultCode===n.Success&&(r=a.data,o=r.id,s=r.email,c=r.login,t(st(o,s,c,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},lt=function(){return function(){var e=Object(O.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:a=e.sent,n=a.data.url,t(ct(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_USER_DATA":case"GET_CAPTCHA_URL_SUCCESS":return Object(P.a)({},e,{},t.payload);default:return e}},mt=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement(rt,this.props)}}]),a}(s.a.Component),ft=Object(_.connect)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(O.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:0===e.sent.data.resultCode&&t(st(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(mt),pt=a(56),dt=a.n(pt),gt=Object(ke.a)({form:"login"})((function(e){var t=e.handleSubmit,a=e.error,n=e.captchaUrl;return s.a.createElement("form",{onSubmit:t},we("Email","email",[De],ye),we("Password","password",[De],ye,{type:"password"}),s.a.createElement("div",{className:dt.a.s1},s.a.createElement("div",{className:dt.a.s2},we(void 0,"rememberMe",[],ye,{type:"checkbox"})),s.a.createElement("div",{className:dt.a.s3},"remember me")),n&&s.a.createElement("img",{src:n,alt:""}),n&&we("Symbols from image","captcha",[De],ye,{}),a&&s.a.createElement("div",{className:be.a.formSummaryError},a),s.a.createElement("div",null,s.a.createElement("button",{className:dt.a.button},"Log In")))})),Et=Object(_.connect)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),{login:function(e,t,a,o){return function(){var s=Object(O.a)(b.a.mark((function s(c){var i,l;return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,C(e,t,a,o);case 2:(i=s.sent).resultCode===n.Success?c(it()):(i.resultCode===r.CaptchaIsRequired&&c(lt()),l=i.messages.length>0?i.messages[0]:"Some error",c(Object(Ve.a)("login",{_error:l})));case 4:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}})((function(e){return e.isAuth?s.a.createElement(h.a,{to:"/profile"}):s.a.createElement("div",{className:dt.a.login},s.a.createElement("h2",null,"LOG IN"),s.a.createElement(gt,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)},captchaUrl:e.captchaUrl}))})),ht={initialized:!1},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(P.a)({},e,{initialized:!0});default:return e}},vt=a(141),bt={},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt;arguments.length>1&&arguments[1];return e},St=a(151),Pt=a(144),yt=Object(se.combineReducers)({profilePage:qe,dialogsPage:vt.a,sidebar:Ot,usersPage:G,auth:ut,form:Pt.a,app:_t}),wt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||se.compose,Nt=Object(se.createStore)(yt,wt(Object(se.applyMiddleware)(St.a)));window.__store__=Nt;var kt=Nt,jt=a(67),Ct=a.n(jt),It=function(e){var t=Object(o.useState)("true"===localStorage.getItem("blackThemeButton")),a=Object(Z.a)(t,2),n=a[0],r=a[1];return s.a.createElement("div",{className:Ct.a.settings},s.a.createElement("span",{className:Ct.a.label},"Night theme"),s.a.createElement("span",{onClick:function(){n?(r(!n),localStorage.setItem("blackThemeButton",String(!n)),document.getElementById("body").style.backgroundColor="white",document.getElementById("wrapper").style.backgroundColor="ghostwhite"):(r(!n),localStorage.setItem("blackThemeButton",String(!n)),document.getElementById("body").style.backgroundColor="#72879c",document.getElementById("wrapper").style.backgroundColor="#586775")},className:ee()(Object(X.a)({},Ct.a.switchOn,n),Ct.a.button)}))},Tt=s.a.lazy((function(){return a.e(3).then(a.bind(null,337))})),Ut=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return s.a.createElement("div",{className:"appWrapper"},s.a.createElement("div",{className:"head"},s.a.createElement(ft,null)),s.a.createElement("div",{className:"nav"},s.a.createElement(E,null)),s.a.createElement("div",{id:"wrapper",className:"appWrapperContent"},s.a.createElement(h.d,null,"               ",s.a.createElement(h.b,{path:"/dialogs",render:(e=Tt,function(t){return s.a.createElement(s.a.Suspense,{fallback:s.a.createElement("div",{style:{margin:"20px"}},"Loading...")},s.a.createElement(e,t))})}),s.a.createElement(h.b,{path:"/profile/:userId?",render:function(){return s.a.createElement($e,null)}}),s.a.createElement(h.b,{path:"/users",render:function(){return s.a.createElement(ge,null)}}),s.a.createElement(h.b,{exact:!0,path:"/login",render:function(){return s.a.createElement(Et,null)}}),s.a.createElement(h.b,{exact:!0,path:"/settings",render:function(){return s.a.createElement(It,null)}}),s.a.createElement(h.b,{path:"*",render:function(){return s.a.createElement("h1",null,"404 NOT FOUND")}}))));var e}}]),a}(s.a.Component);setTimeout((function(){"true"===localStorage.getItem("blackThemeButton")&&(document.getElementById("body").style.backgroundColor="#72879c",document.getElementById("wrapper").style.backgroundColor="#586775")}),500);var At=Object(se.compose)(h.g,Object(_.connect)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){e(it()).then((function(){e({type:"INITIALIZED_SUCCESS"})}))}}}))(Ut),Lt=function(e){return s.a.createElement(g.a,null,s.a.createElement(_.Provider,{store:kt},s.a.createElement(At,null)))};i.a.render(s.a.createElement(Lt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},37:function(e,t,a){e.exports={user:"Users_user__2qA9G",photo:"Users_photo__3muwv",fol:"Users_fol__1f0qC",descriptionUser:"Users_descriptionUser__KHpi2",name:"Users_name__21Ohc",follow:"Users_follow__3Oihd",unfollow:"Users_unfollow__3w5bA"}},38:function(e,t,a){e.exports={header:"Header_header__2S7ee",logo:"Header_logo__18V-f",loginBlock:"Header_loginBlock__349YX",userName:"Header_userName__TVQeU",logout:"Header_logout__1U7Jq",login:"Header_login__2ZaXp",button:"Header_button__3AOAn"}},45:function(e,t,a){e.exports={formControl:"FormsControls_formControl__KJHG6",error:"FormsControls_error__2iS7F",formSummaryError:"FormsControls_formSummaryError__2Z5fj"}},48:function(e,t,a){e.exports=a.p+"static/media/user.8b1dbb1f.png"},54:function(e,t,a){e.exports={paginator:"Paginator_paginator__sV1Wk",pageNumber:"Paginator_pageNumber__2hAk5",selectedPage:"Paginator_selectedPage__to5Hh",button:"Paginator_button__28PL3"}},55:function(e,t,a){e.exports={item:"Post_item__FKWLk",img:"Post_img__21o-o",mes:"Post_mes__td-LE",likes:"Post_likes__LVZOU",count:"Post_count__vNeRN"}},56:function(e,t,a){e.exports={login:"Login_login__1mx91",button:"Login_button__y-y6T",s1:"Login_s1__1Mhuj",s2:"Login_s2__13kQf",s3:"Login_s3__A7rbK"}},66:function(e,t,a){e.exports={postsBlock:"MyPosts_postsBlock__PVv8X",posts:"MyPosts_posts__1_mZ_",button:"MyPosts_button__1Fkxg",area:"MyPosts_area__lk7I7"}},67:function(e,t,a){e.exports={settings:"Settings_settings__yplet",button:"Settings_button__2fj6E",switchOn:"Settings_switchOn__1Q9dc",label:"Settings_label__3_dls"}},9:function(e,t,a){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__3qVEo",mainPhoto:"ProfileInfo_mainPhoto__2Jymk",button:"ProfileInfo_button__3nRMG",info_description:"ProfileInfo_info_description__2od1J",form:"ProfileInfo_form__35zYX",info:"ProfileInfo_info__1r8Ls",description:"ProfileInfo_description__1GUTd",contactsEdit:"ProfileInfo_contactsEdit__2K0eB",contactKey:"ProfileInfo_contactKey__zdFv_",contactValue:"ProfileInfo_contactValue__3S9p6",contactsLink:"ProfileInfo_contactsLink__JvaC6",contactsMenu:"ProfileInfo_contactsMenu__1PsEm",contactsMenuName:"ProfileInfo_contactsMenuName__2mjW2",name:"ProfileInfo_name__3zy0Q",status:"ProfileInfo_status__3WJYX",tab:"ProfileInfo_tab__1dA_n",save:"ProfileInfo_save__3ye6s",edit:"ProfileInfo_edit__ccIe6"}}},[[177,1,2]]]);
//# sourceMappingURL=main.54274f56.chunk.js.map